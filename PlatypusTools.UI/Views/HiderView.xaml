<UserControl x:Class="PlatypusTools.UI.Views.HiderView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:PlatypusTools.UI.ViewModels"
             mc:Ignorable="d" d:DesignHeight="500" d:DesignWidth="800">
    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8">
            <TextBlock VerticalAlignment="Center" Margin="0,0,8,0">Folder:</TextBlock>
            <TextBox Width="300" Text="{Binding NewFolderPath, UpdateSourceTrigger=PropertyChanged}" />
            <Button Content="Browse..." Command="{Binding BrowseFolderCommand}" MinWidth="90" Margin="8,0,0,0" />
            <Button Content="Add to Hider List" Command="{Binding AddFolderCommand}" MinWidth="140" Margin="8,0,0,0" />
        </StackPanel>

        <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,0,0,8">
            <Button Content="ğŸ™ˆ Hide Folder" Command="{Binding SetHiddenCommand}" MinWidth="115" Padding="8,4"
                    Background="#FF4CAF50" Foreground="White"/>
            <Button Content="ğŸ‘ Unhide Folder" Command="{Binding ClearHiddenCommand}" MinWidth="130" Margin="8,0,0,0" Padding="8,4"
                    Background="#FF2196F3" Foreground="White"/>
            <Button Content="ğŸ”’ Restrict to Administrators" Command="{Binding ApplyAclCommand}" MinWidth="210" Margin="8,0,0,0" Padding="8,4"
                    Background="#FFFF9800" Foreground="White"/>
            <Button Content="ğŸ“‚ Load Configuration" Command="{Binding LoadConfigCommand}" MinWidth="160" Margin="8,0,0,0" Padding="8,4"/>
            <Button Content="ğŸ’¾ Save Configuration" Command="{Binding SaveConfigCommand}" MinWidth="160" Margin="8,0,0,0" Padding="8,4"/>
        </StackPanel>

        <ScrollViewer Grid.Row="2" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <DataGrid ItemsSource="{Binding Records}" AutoGenerateColumns="False"
                      CanUserResizeColumns="True" CanUserSortColumns="True"
                      ColumnHeaderHeight="32"
                      HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Folder" Binding="{Binding FolderPath}" Width="*" MinWidth="250" CanUserResize="True" IsReadOnly="True" />
                    <DataGridCheckBoxColumn Header="Hidden" Binding="{Binding IsHidden, Mode=OneWay}" Width="70" MinWidth="60" CanUserResize="True" IsReadOnly="True" />
                    <DataGridCheckBoxColumn Header="Admin Only" Binding="{Binding AclRestricted, UpdateSourceTrigger=PropertyChanged}" Width="85" MinWidth="70" CanUserResize="True" />
                    <DataGridCheckBoxColumn Header="EFS" Binding="{Binding EfsEnabled, UpdateSourceTrigger=PropertyChanged}" Width="60" MinWidth="50" CanUserResize="True" />
                    <DataGridTemplateColumn Header="Actions" Width="340" MinWidth="320">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Button Content="ğŸ™ˆ Hide" Command="{Binding DataContext.SetHiddenCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" MinWidth="70" Margin="0,0,2,0" Padding="6,3" ToolTip="Hide this folder" Background="#FF4CAF50" Foreground="White" />
                                <Button Content="ğŸ‘ Unhide" Command="{Binding DataContext.ClearHiddenCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" MinWidth="85" Margin="0,0,2,0" Padding="6,3" ToolTip="Unhide this folder" Background="#FF2196F3" Foreground="White" />
                                <Button Content="ğŸ”’ ACL" Command="{Binding DataContext.ApplyAclCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" MinWidth="65" Margin="0,0,2,0" Padding="6,3" ToolTip="Restrict to Administrators" Background="#FFFF9800" Foreground="White" />
                                <Button Content="ğŸ” EFS" Command="{Binding DataContext.ApplyEfsCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" MinWidth="65" Margin="0,0,2,0" Padding="6,3" ToolTip="Apply EFS encryption" Background="#FF9C27B0" Foreground="White" />
                                <Button Content="ğŸ—‘ï¸ Remove" Command="{Binding DataContext.RemoveRecordCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" MinWidth="90" Padding="6,3" ToolTip="Remove from list" Background="#FFF44336" Foreground="White" />
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        </ScrollViewer>
    </Grid>
</UserControl>