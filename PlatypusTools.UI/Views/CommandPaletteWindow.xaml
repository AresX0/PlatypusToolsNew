<Window x:Class="PlatypusTools.UI.Views.CommandPaletteWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Command Palette" 
        Width="600" Height="400"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Topmost="True">
    <Border Background="{DynamicResource BackgroundBrush}" 
            BorderBrush="{DynamicResource AccentBrush}" 
            BorderThickness="1" 
            CornerRadius="8"
            Margin="10">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.4"/>
        </Border.Effect>
        <Grid Margin="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Search Box -->
            <TextBox x:Name="SearchBox" Grid.Row="0" 
                     FontSize="16" Padding="10,8"
                     Background="{DynamicResource HeaderBackgroundBrush}"
                     BorderThickness="0"
                     TextChanged="SearchBox_TextChanged"
                     PreviewKeyDown="SearchBox_PreviewKeyDown">
                <TextBox.Style>
                    <Style TargetType="TextBox">
                        <Style.Triggers>
                            <Trigger Property="Text" Value="">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <VisualBrush Stretch="None" AlignmentX="Left">
                                            <VisualBrush.Visual>
                                                <TextBlock Text="Type a command..." 
                                                           Foreground="{DynamicResource SecondaryTextBrush}" 
                                                           Margin="12,0,0,0"/>
                                            </VisualBrush.Visual>
                                        </VisualBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>
            
            <!-- Command List -->
            <ListBox x:Name="CommandList" Grid.Row="1" 
                     Margin="0,10,0,0"
                     Background="Transparent"
                     BorderThickness="0"
                     ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                     VirtualizingStackPanel.IsVirtualizing="True"
                     VirtualizingStackPanel.VirtualizationMode="Recycling"
                     MouseDoubleClick="CommandList_MouseDoubleClick"
                     PreviewKeyDown="CommandList_PreviewKeyDown">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" Text="{Binding Icon}" 
                                       Width="24" FontSize="14"
                                       VerticalAlignment="Center"/>
                            
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="{Binding Name}" 
                                           FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding Description}" 
                                           FontSize="11"
                                           Foreground="{DynamicResource ForegroundDimBrush}"
                                           TextTrimming="CharacterEllipsis"/>
                            </StackPanel>
                            
                            <TextBlock Grid.Column="2" Text="{Binding Shortcut}"
                                       Foreground="{DynamicResource ForegroundDimBrush}"
                                       FontSize="11"
                                       VerticalAlignment="Center"/>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            
            <!-- Status Bar -->
            <TextBlock x:Name="StatusText" Grid.Row="2" 
                       Text="↑↓ Navigate  Enter Execute  Esc Close"
                       FontSize="11"
                       Foreground="{DynamicResource ForegroundDimBrush}"
                       Margin="0,10,0,0"/>
        </Grid>
    </Border>
</Window>
