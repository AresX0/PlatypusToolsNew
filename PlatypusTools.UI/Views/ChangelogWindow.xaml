<Window x:Class="PlatypusTools.UI.Views.ChangelogWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Changelog - PlatypusTools"
        Width="700" Height="600"
        MinWidth="500" MinHeight="400"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        Background="{DynamicResource WindowBackgroundBrush}">

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,12">
            <TextBlock Text="ðŸ“‹ Changelog"
                       FontSize="22" FontWeight="Bold"
                       Foreground="{DynamicResource TextBrush}" />
            <TextBlock Text="Release history from GitHub"
                       FontSize="13"
                       Foreground="{DynamicResource SecondaryTextBrush}"
                       Margin="0,2,0,0" />
        </StackPanel>

        <!-- Loading indicator -->
        <TextBlock x:Name="LoadingText"
                   Grid.Row="1"
                   Text="Loading releases..."
                   FontSize="14"
                   Foreground="{DynamicResource SecondaryTextBrush}"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center" />

        <!-- Releases list -->
        <ListBox x:Name="ReleasesListBox"
                 Grid.Row="1"
                 Background="Transparent"
                 BorderThickness="0"
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                 VirtualizingPanel.ScrollUnit="Pixel">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                    <Setter Property="Padding" Value="0" />
                    <Setter Property="Margin" Value="0" />
                    <Setter Property="Background" Value="Transparent" />
                    <Setter Property="Focusable" Value="False" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ListBoxItem">
                                <ContentPresenter Margin="0" />
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="4,8,4,4">
                        <!-- Version header -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,2">
                            <TextBlock Text="{Binding DisplayTitle}"
                                       FontSize="16" FontWeight="Bold"
                                       Foreground="{DynamicResource PrimaryBrush}" />
                            <TextBlock Text=" (pre-release)"
                                       FontSize="12"
                                       Foreground="#FFFF9800"
                                       VerticalAlignment="Center"
                                       Margin="6,0,0,0">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsPrerelease}" Value="True">
                                                <Setter Property="Visibility" Value="Visible" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </StackPanel>

                        <!-- Published date -->
                        <TextBlock Text="{Binding DisplayDate}"
                                   FontSize="12"
                                   Foreground="{DynamicResource SecondaryTextBrush}"
                                   Margin="0,0,0,6" />

                        <!-- Release body -->
                        <TextBlock Text="{Binding Body}"
                                   TextWrapping="Wrap"
                                   FontSize="13"
                                   Foreground="{DynamicResource TextBrush}"
                                   Margin="0,0,0,10" />

                        <!-- Separator -->
                        <Rectangle Height="1"
                                   Fill="{DynamicResource SurfaceBrush}"
                                   Margin="0,2,0,0"
                                   HorizontalAlignment="Stretch" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!-- Footer -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,12,0,0">
            <Button Content="Close"
                    Click="Close_Click"
                    Width="90" Height="30"
                    Background="{DynamicResource SurfaceBrush}"
                    Foreground="{DynamicResource TextBrush}"
                    FontSize="13"
                    Cursor="Hand" />
        </StackPanel>
    </Grid>
</Window>
