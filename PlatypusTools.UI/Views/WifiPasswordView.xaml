<UserControl x:Class="PlatypusTools.UI.Views.WifiPasswordView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignHeight="700" d:DesignWidth="1200">
    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="5" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock Text="ðŸ“¶ WiFi Password Manager" FontSize="16" FontWeight="Bold" Margin="0,0,0,4" />

        <!-- Current Connection & Controls -->
        <GroupBox Grid.Row="1" Header="Controls" Margin="0,0,0,4">
            <StackPanel Margin="8">
                <TextBlock Text="{Binding CurrentConnectionDisplay}" FontWeight="SemiBold" Margin="0,0,0,8" />
                <WrapPanel>
                    <Button Content="ðŸ”„ Refresh" Command="{Binding RefreshCommand}" Padding="12,4" Margin="0,0,4,0"
                            Background="#FF2196F3" Foreground="White" />
                    <Button Content="ðŸ“‹ Copy Password" Command="{Binding CopyPasswordCommand}" Padding="10,4" Margin="0,0,4,0"
                            Background="#FF4CAF50" Foreground="White" />
                    <Button Content="ðŸ“‹ Copy All" Command="{Binding CopyAllCommand}" Padding="10,4" Margin="0,0,4,0"
                            Background="#FF9C27B0" Foreground="White" />
                    <Button Content="ðŸ’¾ Export Profiles" Command="{Binding ExportCommand}" Padding="10,4" Margin="0,0,4,0"
                            Background="#FFFF9800" Foreground="White" />
                    <Button Content="ðŸ—‘ï¸ Delete Profile" Command="{Binding DeleteProfileCommand}" Padding="10,4" Margin="0,0,4,0"
                            Background="#FFF44336" Foreground="White" />
                    <CheckBox Content="Show Passwords" IsChecked="{Binding ShowPasswords}" VerticalAlignment="Center" Margin="12,0,0,0" />
                </WrapPanel>
            </StackPanel>
        </GroupBox>

        <GridSplitter Grid.Row="2" Height="5" HorizontalAlignment="Stretch"
                      Background="#CCCCCC" Cursor="SizeNS" ResizeDirection="Rows"/>

        <!-- WiFi Profiles Grid -->
        <DataGrid Grid.Row="3" ItemsSource="{Binding Profiles}" SelectedItem="{Binding SelectedProfile}"
                  AutoGenerateColumns="False" IsReadOnly="True" SelectionMode="Single"
                  GridLinesVisibility="Horizontal" AlternatingRowBackground="{DynamicResource ControlBackgroundBrush}"
                  Background="{DynamicResource ControlBackgroundBrush}" Foreground="{DynamicResource WindowForegroundBrush}" BorderThickness="0">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Profile Name" Binding="{Binding ProfileName}" Width="*" MinWidth="200" />
                <DataGridTextColumn Header="SSID" Binding="{Binding Ssid}" Width="200" />
                <DataGridTextColumn Header="Authentication" Binding="{Binding Authentication}" Width="120" />
                <DataGridTextColumn Header="Cipher" Binding="{Binding Cipher}" Width="80" />
                <DataGridTemplateColumn Header="Password" Width="200" MinWidth="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock FontFamily="Consolas">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Text" Value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding DataContext.ShowPasswords, RelativeSource={RelativeSource AncestorType=DataGrid}}" Value="True">
                                                <Setter Property="Text" Value="{Binding PasswordDisplay}" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Connection" Binding="{Binding ConnectionMode}" Width="120" />
                <DataGridTextColumn Header="Type" Binding="{Binding NetworkType}" Width="100" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- Status Bar -->
        <TextBlock Grid.Row="4" Text="{Binding StatusMessage}" Margin="0,4,0,0"
                   Foreground="{DynamicResource SecondaryTextBrush}" FontSize="11" />
    </Grid>
</UserControl>
