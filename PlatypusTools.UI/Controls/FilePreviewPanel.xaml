<UserControl x:Class="PlatypusTools.UI.Controls.FilePreviewPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" 
             d:DesignHeight="400" d:DesignWidth="300">
    <Grid Background="{DynamicResource BackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource HeaderBackgroundBrush}" 
                BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,0,1"
                Padding="10,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="FileNameText" Grid.Column="0" 
                           Text="No file selected" 
                           FontWeight="SemiBold"
                           TextTrimming="CharacterEllipsis"
                           VerticalAlignment="Center"/>
                
                <Button x:Name="ClosePreviewButton" Grid.Column="1" 
                        Content="âœ•" Width="24" Height="24"
                        Background="Transparent" BorderThickness="0"
                        Click="ClosePreview_Click"
                        ToolTip="Close preview"/>
            </Grid>
        </Border>
        
        <!-- Preview Content -->
        <Grid Grid.Row="1">
            <!-- No Selection -->
            <TextBlock x:Name="NoSelectionText" 
                       Text="Select a file to preview"
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       Foreground="{DynamicResource ForegroundDimBrush}"/>
            
            <!-- Image Preview -->
            <ScrollViewer x:Name="ImageScrollViewer" 
                          Visibility="Collapsed"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto">
                <Image x:Name="ImagePreview" 
                       Stretch="Uniform" 
                       RenderOptions.BitmapScalingMode="HighQuality"/>
            </ScrollViewer>
            
            <!-- Text Preview -->
            <ScrollViewer x:Name="TextScrollViewer" 
                          Visibility="Collapsed"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto">
                <TextBox x:Name="TextPreview" 
                         IsReadOnly="True" 
                         Background="Transparent"
                         BorderThickness="0"
                         FontFamily="Consolas"
                         TextWrapping="NoWrap"
                         AcceptsReturn="True"/>
            </ScrollViewer>
            
            <!-- Hex Preview -->
            <ScrollViewer x:Name="HexScrollViewer" 
                          Visibility="Collapsed"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto">
                <TextBox x:Name="HexPreview" 
                         IsReadOnly="True" 
                         Background="Transparent"
                         BorderThickness="0"
                         FontFamily="Consolas"
                         FontSize="11"
                         TextWrapping="NoWrap"
                         AcceptsReturn="True"/>
            </ScrollViewer>
            
            <!-- Unsupported File -->
            <StackPanel x:Name="UnsupportedPanel" 
                        Visibility="Collapsed"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <TextBlock Text="Preview not available"
                           FontSize="14" FontWeight="SemiBold"
                           HorizontalAlignment="Center"/>
                <TextBlock x:Name="UnsupportedTypeText" 
                           Text="File type: Unknown"
                           Foreground="{DynamicResource ForegroundDimBrush}"
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
                <Button Content="Open with Default App" 
                        Margin="0,15,0,0"
                        Padding="15,8"
                        Click="OpenWithDefault_Click"/>
            </StackPanel>
            
            <!-- Loading -->
            <StackPanel x:Name="LoadingPanel" 
                        Visibility="Collapsed"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="100" Height="4"/>
                <TextBlock Text="Loading preview..." Margin="0,10,0,0"
                           HorizontalAlignment="Center"
                           Foreground="{DynamicResource ForegroundDimBrush}"/>
            </StackPanel>
        </Grid>
        
        <!-- File Info -->
        <Border Grid.Row="2" Background="{DynamicResource HeaderBackgroundBrush}"
                BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,0,0"
                Padding="10,6">
            <Grid x:Name="FileInfoPanel" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="FileSizeText" Grid.Column="0" 
                           Foreground="{DynamicResource ForegroundDimBrush}"
                           VerticalAlignment="Center"/>
                <TextBlock x:Name="FileDimensionsText" Grid.Column="1" 
                           Foreground="{DynamicResource ForegroundDimBrush}"
                           VerticalAlignment="Center" Margin="15,0"/>
                <TextBlock x:Name="FileModifiedText" Grid.Column="2" 
                           Foreground="{DynamicResource ForegroundDimBrush}"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</UserControl>
