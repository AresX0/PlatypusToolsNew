<Window x:Class="PlatypusTools.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:PlatypusTools.UI.Views"
        xmlns:vm="clr-namespace:PlatypusTools.UI.ViewModels"
        xmlns:views="clr-namespace:PlatypusTools.UI.Views"
        xmlns:controls="clr-namespace:PlatypusTools.UI.Controls"
        Title="PlatypusTools" Height="700" Width="1200" Icon="Assets/platypus.png">
    <Window.DataContext>
        <vm:MainWindowViewModel />
    </Window.DataContext>
    <Window.Resources>
        <LinearGradientBrush x:Key="HeaderBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#FF1E88E5" Offset="0"/>
            <GradientStop Color="#FF1565C0" Offset="1"/>
        </LinearGradientBrush>
    </Window.Resources>
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="File">
                <MenuItem Header="Open Folder..." Command="{Binding BrowseCommand}" />
                <Separator />
                <MenuItem Header="Save Workspace..." Command="{Binding SaveWorkspaceCommand}" />
                <MenuItem Header="Export Config..." Command="{Binding ExportConfigCommand}" />
                <MenuItem Header="Import Config..." Command="{Binding ImportConfigCommand}" />
                <MenuItem Header="Open Recent..." Command="{Binding OpenRecentWorkspacesCommand}" />
                <Separator />
                <MenuItem Header="Backup Settings..." Click="BackupSettings" />
                <MenuItem Header="Restore Settings..." Click="RestoreSettings" />
                <Separator />
                <MenuItem Header="Exit" Command="{Binding ExitCommand}" />
            </MenuItem>
            <MenuItem Header="View">
                <MenuItem Header="Toggle Staging Panel" Command="{Binding ToggleStagingInDuplicatesCommand}" IsCheckable="True" IsChecked="{Binding Duplicates.StagingVisible, Mode=TwoWay}" />
                <MenuItem Header="Show Preview Panel" IsCheckable="True" IsChecked="{Binding Duplicates.PreviewVisible, Mode=TwoWay}" Command="{Binding TogglePreviewPanelCommand}" />
                <Separator />
                <MenuItem Header="Dark Theme" IsCheckable="True" IsChecked="{Binding IsDarkTheme, Mode=TwoWay}" Command="{Binding ToggleThemeCommand}" />
            </MenuItem>
            <MenuItem Header="Tools">
                <MenuItem Header="Open Archived Scripts" Command="{Binding OpenArchivedScriptsCommand}" />
                <Separator />
                <MenuItem Header="Run Archived Script..." Command="{Binding RunArchivedScriptCommand}" />
                <MenuItem Header="Run Parity Tests..." Command="{Binding RunParityTestsCommand}" />
                <MenuItem Header="Credential Manager..." Command="{Binding OpenCredentialManagerCommand}" />
                <Separator />
                <MenuItem Header="Validate DataContext" Click="ValidateDataContext_Click" />
                <Separator />
                <MenuItem Header="Settings..." Click="OpenSettings" InputGestureText="Ctrl+," />
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="View Help Documentation" Command="{Binding OpenHelpCommand}" />
                <Separator />
                <MenuItem Header="File Cleaner - How to Use" Click="ShowFileCleanerHelp" />
                <MenuItem Header="Video Converter - How to Use" Click="ShowVideoConverterHelp" />
                <MenuItem Header="Video Combiner - How to Use" Click="ShowVideoCombinerHelp" />
                <MenuItem Header="Duplicates Finder - How to Use" Click="ShowDuplicatesHelp" />
                <MenuItem Header="System Cleaner - How to Use" Click="ShowSystemCleanerHelp" />
                <MenuItem Header="Folder Hider - How to Use" Click="ShowFolderHiderHelp" />
                <Separator />
                <MenuItem Header="View Logs..." Click="OpenLogViewer" />
                <MenuItem Header="Check for Updates..." Click="CheckForUpdates" />
                <Separator />
                <MenuItem Header="About PlatypusTools" Click="ShowAbout" />
            </MenuItem>
        </Menu>

        <Border DockPanel.Dock="Top" Background="{StaticResource HeaderBrush}" Padding="12,8">
            <StackPanel Orientation="Horizontal">
                <Image Source="Assets/platypus.png" Width="48" Height="48" Margin="0,0,12,0" />
                <StackPanel VerticalAlignment="Center">
                    <TextBlock FontSize="24" FontWeight="Bold" Foreground="White">PlatypusTools</TextBlock>
                    <TextBlock FontSize="12" Foreground="#FFBBDEFB">Advanced File Management &amp; Media Tools</TextBlock>
                </StackPanel>
            </StackPanel>
        </Border>

        <TabControl DockPanel.Dock="Top" Margin="8">
            <TabItem Header="File Cleaner">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <views:FileCleanerView DataContext="{Binding FileCleaner}" />
                </ScrollViewer>
            </TabItem>
            <TabItem Header="Media Conversion">
                <TabControl>
                    <TabItem Header="Video Converter">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:VideoConverterView DataContext="{Binding VideoConverter}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Video Combiner">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:VideoCombinerView DataContext="{Binding VideoCombiner}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Image Converter">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:ImageConverterView DataContext="{Binding ImageConverter}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Image Resizer">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:ImageResizerView DataContext="{Binding ImageResizer}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="ICO Converter">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:IconConverterView DataContext="{Binding IconConverter}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Upscaler">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:UpscalerView DataContext="{Binding Upscaler}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Bootable USB Creator">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:BootableUSBView DataContext="{Binding BootableUSB}" />
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </TabItem>
            <TabItem Header="Duplicates">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="300" />
                    </Grid.ColumnDefinitions>
                    <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                        <views:DuplicatesView DataContext="{Binding Duplicates}" />
                    </ScrollViewer>
                    <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                        <Border BorderBrush="Gray" BorderThickness="1" Padding="8" Background="{DynamicResource WindowBackgroundBrush}">
                            <StackPanel>
                                <TextBlock FontWeight="Bold">Auxiliary</TextBlock>
                                <ContentControl Content="{Binding Duplicates.LastPreviewedFilePath}">
                                    <ContentControl.ContentTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}" TextWrapping="Wrap" />
                                        </DataTemplate>
                                    </ContentControl.ContentTemplate>
                                </ContentControl>
                                <views:PreviewPanel DataContext="{Binding Duplicates}" Visibility="{Binding Duplicates.PreviewVisible, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                <views:StagingPanel DataContext="{Binding Duplicates.Staging}" Visibility="{Binding Duplicates.StagingVisible, Converter={StaticResource BooleanToVisibilityConverter}}" />
                            </StackPanel>
                        </Border>
                    </ScrollViewer>
                </Grid>
            </TabItem>
            <TabItem Header="Cleanup">
                <TabControl>
                    <TabItem Header="Recent Cleaner">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:RecentCleanupView DataContext="{Binding Recent}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Disk Cleanup">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:DiskCleanupView DataContext="{Binding DiskCleanup}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Privacy Cleaner">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:PrivacyCleanerView DataContext="{Binding PrivacyCleaner}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Empty Folder Scanner">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:EmptyFolderScannerView DataContext="{Binding EmptyFolderScanner}" />
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </TabItem>
            <TabItem Header="Security">
                <TabControl>
                    <TabItem Header="Folder Hider">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:HiderView DataContext="{Binding Hider}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="System Audit">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:SystemAuditView DataContext="{Binding SystemAudit}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Startup Manager">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:StartupManagerView DataContext="{Binding StartupManager}" />
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </TabItem>
            <TabItem Header="Metadata">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <views:MetadataEditorView DataContext="{Binding MetadataEditor}" />
                </ScrollViewer>
            </TabItem>
            <TabItem Header="Multimedia Editor">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <views:MultimediaEditorView DataContext="{Binding MultimediaEditor}" />
                </ScrollViewer>
            </TabItem>
            <TabItem Header="Tools">
                <TabControl>
                    <TabItem Header="Website Downloader">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:WebsiteDownloaderView DataContext="{Binding WebsiteDownloader}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="File Analyzer">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:FileAnalyzerView DataContext="{Binding FileAnalyzer}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Media Library">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:MediaLibraryView DataContext="{Binding MediaLibrary}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Disk Space Analyzer">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:DiskSpaceAnalyzerView DataContext="{Binding DiskSpaceAnalyzer}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Network Tools">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:NetworkToolsView DataContext="{Binding NetworkTools}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Process Manager">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:ProcessManagerView DataContext="{Binding ProcessManager}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Registry Cleaner">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:RegistryCleanerView DataContext="{Binding RegistryCleaner}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Scheduled Tasks">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:ScheduledTasksView DataContext="{Binding ScheduledTasks}" />
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="System Restore">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <views:SystemRestoreView DataContext="{Binding SystemRestore}" />
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <controls:StatusBarControl DockPanel.Dock="Bottom"/>
    </DockPanel>
</Window>



